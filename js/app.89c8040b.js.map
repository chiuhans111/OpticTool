{"version":3,"file":"js/app.89c8040b.js","mappings":"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","sources":["webpack://optictool/./src/App.vue","webpack://optictool/./src/components/LensSheet.vue","webpack://optictool/./src/optic/OpticMaterial.js","webpack://optictool/./src/optic/OpticSurface.js","webpack://optictool/./src/optic/OpticSystem.js","webpack://optictool/./src/components/surface/OpticSurfaceComponent.vue","webpack://optictool/./src/components/surface/OpticSurfaceComponent.vue?6aec","webpack://optictool/./src/components/LensSheet.vue?c9b6","webpack://optictool/./src/components/LensPlot.vue","webpack://optictool/./src/optic/RayTrace.js","webpack://optictool/./src/components/LensPlot.vue?38c6","webpack://optictool/./src/optic/index.js","webpack://optictool/./src/App.vue?7ccd","webpack://optictool/./src/main.js","webpack://optictool/webpack/bootstrap","webpack://optictool/webpack/runtime/amd define","webpack://optictool/webpack/runtime/amd options","webpack://optictool/webpack/runtime/chunk loaded","webpack://optictool/webpack/runtime/compat get default export","webpack://optictool/webpack/runtime/define property getters","webpack://optictool/webpack/runtime/global","webpack://optictool/webpack/runtime/hasOwnProperty shorthand","webpack://optictool/webpack/runtime/make namespace object","webpack://optictool/webpack/runtime/node module decorator","webpack://optictool/webpack/runtime/jsonp chunk loading","webpack://optictool/webpack/startup"],"sourcesContent":["<template>\n  <div class=\"container\">\n      <div>\n        <LensPlot :system=\"system\"></LensPlot>\n      </div>\n      <div>\n        <LensSheet :system=\"system\"></LensSheet>\n      </div>\n  </div>\n</template>\n\n<script>\nimport LensSheet from './components/LensSheet.vue'\nimport LensPlot from './components/LensPlot.vue'\nimport optic from './optic'\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      system: optic.system\n    }\n  },\n  components: {\n    LensSheet,\n    LensPlot\n  },\n  watch: {\n    system: {\n      handler() {\n      },\n      deep: true\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n","<template>\r\n    <div>\r\n        <p>Lens Data</p>\r\n        <div class=\"lens-sheet_row\"\r\n            v-for=\"surface, i in system.surfaces\" :key=\"i\">\r\n            <component :is=\"surface.component\"\r\n                :surface=\"surface\">\r\n            </component>\r\n            <div class=\"lens-sheet_row-end\">\r\n                <button @click=\"addSurface(i)\"\r\n                    class=\"btn_add\">Add</button>\r\n                <button\r\n                    @click=\"system.surfaces.splice(i, 1)\">Del</button>\r\n\r\n            </div>\r\n        </div>\r\n        <button\r\n            @click=\"addSurface(system.surfaces.length)\">Add</button>\r\n        <p>t=thickness, c=curvature (1/R), n=index of\r\n            refraction</p>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport OpticSurface from '@/optic/OpticSurface'\r\nimport OpticSystem from '@/optic/OpticSystem'\r\nimport OpticSurfaceComponent from './surface/OpticSurfaceComponent.vue'\r\nexport default {\r\n    props: {\r\n        system: OpticSystem\r\n    },\r\n    components: {\r\n        OpticSurfaceComponent\r\n    },\r\n    methods: {\r\n        addSurface(i) {\r\n            this.system.surfaces.splice(i, 0, new OpticSurface())\r\n        }\r\n    }\r\n}\r\n\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.lens-sheet_row {\r\n    position: relative;\r\n    margin: 5px;\r\n    width: fit-content;\r\n\r\n    &-end {\r\n        display: flex;\r\n        position: absolute;\r\n        left: 100%;\r\n        top: 0;\r\n    }\r\n}\r\n\r\n.btn_add {\r\n    position: relative;\r\n    top: -10px;\r\n}\r\n</style>","class OpticMaterial {\r\n    index = 1.5\r\n    constructor(index) {\r\n        this.index = index\r\n    }\r\n}\r\n\r\nexport default OpticMaterial","import OpticMaterial from \"./OpticMaterial\"\r\nimport * as tf from \"@tensorflow/tfjs\"\r\n\r\nclass OpticSurface {\r\n    thickness = 0\r\n    curvature = 0\r\n    material = new OpticMaterial(1.5)\r\n\r\n    component = \"OpticSurfaceComponent\"\r\n\r\n    constructor(thickness, curvature, material) {\r\n        this.thickness = thickness || this.thickness\r\n        this.curvature = curvature || this.curvature\r\n        this.material = material || this.material\r\n    }\r\n\r\n    /**\r\n     * @param raypos {tf.Tensor}\r\n     * @param raydir {tf.Tensor}\r\n    */\r\n    trace(raypos, raydir) {\r\n        const c = this.curvature\r\n        if (c == 0) {\r\n            const l = raypos.gather(2).div(raydir.gather(2)).mul(-1)\r\n            return raypos.add(raydir.mul(l))\r\n        } else {\r\n            const A = raydir.mul(raydir).sum(0).mul(c)\r\n            const B = raypos.mul(raydir).sum(0).mul(c).sub(raydir.gather(2)).mul(2)\r\n            const C = raypos.mul(raypos).sum(0).mul(c).sub(raypos.gather(2).mul(2))\r\n            const l = B.mul(-1).sub(B.mul(B).sub(A.mul(C).mul(4)).sqrt()).div(A).div(2)\r\n            return raypos.add(raydir.mul(l))\r\n        }\r\n    }\r\n\r\n    normal(raypos) {\r\n        const c = this.curvature\r\n        if (c == 0) {\r\n            return raypos.mul(0).add(tf.tensor([[0], [0], [-1]]))\r\n        } else {\r\n            let n = raypos.sub(tf.tensor([[0], [0], [1 / c]]))\r\n            return n.div(n.mul(n).sum(0).sqrt())\r\n        }\r\n    }\r\n\r\n\r\n    shape(r) {\r\n        const r2 = r ** 2\r\n        return r2 * this.curvature / (1 + Math.sqrt(1 - r2 * this.curvature ** 2))\r\n    }\r\n}\r\n\r\n\r\nexport default OpticSurface","import OpticMaterial from \"./OpticMaterial\"\r\nimport OpticSurface from \"./OpticSurface\"\r\n\r\n\r\nclass OpticSystem {\r\n    surfaces = [\r\n        new OpticSurface(6.1, 0.04, new OpticMaterial(1.5108)),\r\n        new OpticSurface(2.8, -0.01, new OpticMaterial(1)),\r\n        new OpticSurface(1.3, -0.01, new OpticMaterial(1.6042)),\r\n        new OpticSurface(5.9, 0.04, new OpticMaterial(1)),\r\n        new OpticSurface(7.4, 0.02, new OpticMaterial(1.5108)),\r\n        new OpticSurface(35, -0.04, new OpticMaterial(1)),\r\n        new OpticSurface(0, 0, new OpticMaterial(1))\r\n    ]\r\n}\r\n\r\nexport default OpticSystem","<template>\r\n    <div>\r\n        <label for=\"thickness\">t=</label>\r\n        <input id=\"thickness\" type=\"number\" step=\"0.05\"\r\n            v-model.number=\"surface.thickness\">\r\n        <span>, </span>\r\n        <label for=\"curvature\">c=</label>\r\n        <input id=\"thickness\" type=\"number\" step=\"0.002\"\r\n            v-model.number=\"surface.curvature\">\r\n        <span>, </span>\r\n        <label for=\"material\">n=</label>\r\n        <input id=\"material\" type=\"number\" step=\"0.01\"\r\n            min=\"1\" max=\"99\"\r\n            v-model.number=\"surface.material.index\">\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport OpticSurface from '@/optic/OpticSurface'\r\n\r\nexport default {\r\n    props: {\r\n        surface: OpticSurface\r\n    },\r\n    data() {\r\n        return {\r\n            thickness: 0\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\ninput {\r\n    width: 60px;\r\n    height: 20px;\r\n    margin: 0px 3px;\r\n}\r\n</style>","import { render } from \"./OpticSurfaceComponent.vue?vue&type=template&id=48674c34\"\nimport script from \"./OpticSurfaceComponent.vue?vue&type=script&lang=js\"\nexport * from \"./OpticSurfaceComponent.vue?vue&type=script&lang=js\"\n\nimport \"./OpticSurfaceComponent.vue?vue&type=style&index=0&id=48674c34&lang=css\"\n\nimport exportComponent from \"E:\\\\Documents\\\\Github\\\\OpticTool\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./LensSheet.vue?vue&type=template&id=92b10238&scoped=true\"\nimport script from \"./LensSheet.vue?vue&type=script&lang=js\"\nexport * from \"./LensSheet.vue?vue&type=script&lang=js\"\n\nimport \"./LensSheet.vue?vue&type=style&index=0&id=92b10238&lang=scss&scoped=true\"\n\nimport exportComponent from \"E:\\\\Documents\\\\Github\\\\OpticTool\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-92b10238\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"lens-plot_main\">\r\n        <div ref=\"container\" class=\"lens-plot_container\">\r\n            <canvas ref=\"canvas\"></canvas>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport OpticSystem from '@/optic/OpticSystem'\r\nimport RayTrace from '@/optic/RayTrace'\r\n\r\nexport default {\r\n    props: {\r\n        system: OpticSystem\r\n    },\r\n    data() {\r\n        return {\r\n            canvas: null,\r\n            ctx: null\r\n        }\r\n    },\r\n    methods: {\r\n        resize() {\r\n            const rect = this.$refs.container.getBoundingClientRect()\r\n            this.$refs.canvas.width = rect.width\r\n            this.$refs.canvas.height = rect.height\r\n            this.update()\r\n        },\r\n        update() {\r\n            /**@type {HTMLCanvasElement} */\r\n            const canvas = this.canvas\r\n            /**@type {CanvasRenderingContext2D} */\r\n            const ctx = this.ctx\r\n            ctx.resetTransform()\r\n            ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n\r\n            ctx.translate(canvas.width / 2, canvas.height / 2)\r\n\r\n\r\n\r\n            let ttl = 0\r\n\r\n            for (let surface of this.system.surfaces) {\r\n                ttl += surface.thickness\r\n            }\r\n\r\n            let scale = canvas.width / ttl * 0.8\r\n            ctx.scale(scale, scale)\r\n            ctx.lineWidth = 1 / scale\r\n\r\n\r\n            ctx.translate(-ttl / 2, 0)\r\n\r\n\r\n            // RAYTRACE\r\n            const result = RayTrace(this.system)\r\n            ctx.strokeStyle = 'blue'\r\n            for (let i = 0; i < result[0][0].length; i++) {\r\n                ctx.beginPath()\r\n                for (let j = 0; j < result.length; j++) {\r\n                    let y = result[j][1][i]\r\n                    let z = result[j][2][i]\r\n                    if (j == 0) ctx.moveTo(z, y)\r\n                    else ctx.lineTo(z, y)\r\n                }\r\n                ctx.stroke()\r\n            }\r\n\r\n\r\n\r\n            ctx.lineWidth = 2 / scale\r\n            ctx.strokeStyle = 'black'\r\n\r\n            const N = 30\r\n\r\n            let z0 = 0\r\n            for (let surface of this.system.surfaces) {\r\n                let R = 15\r\n\r\n                ctx.beginPath()\r\n                for (let i = 0; i <= N; i++) {\r\n                    let r = (i / N - 0.5) * 2 * R\r\n                    let z = surface.shape(r)\r\n\r\n                    if (i == 0)\r\n                        ctx.moveTo(z0 + z, r)\r\n                    else\r\n                        ctx.lineTo(z0 + z, r)\r\n\r\n                }\r\n                ctx.stroke()\r\n                z0 += surface.thickness\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        system: {\r\n            handler() {\r\n                this.update()\r\n            },\r\n            deep: true\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        this.canvas = this.$refs.canvas\r\n        this.ctx = this.canvas.getContext('2d')\r\n        addEventListener(\"resize\", this.resize)\r\n        this.resize()\r\n    },\r\n    unmounted() {\r\n        removeEventListener(\"resize\", this.resize)\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.lens-plot_main {\r\n    position: relative;\r\n    height: 500px;\r\n    max-width: 700px;\r\n}\r\n\r\n.lens-plot_container {\r\n    position: relative;\r\n    overflow: hidden;\r\n    width: 100%;\r\n    height: 100%;\r\n    border: solid 1px black;\r\n}\r\n</style>","import OpticSystem from \"./OpticSystem\"\r\nimport * as tf from \"@tensorflow/tfjs\"\r\n\r\n\r\n\r\n\r\n/**\r\n * @param system {OpticSystem} \r\n * @param raypos {tf.Tensor}\r\n * @param raydir {tf.Tensor}\r\n*/\r\nfunction RayTrace(system) {\r\n    tf.engine().startScope()\r\n    let raypos = []\r\n    let raydir = []\r\n    let N = 11\r\n\r\n    const R = 20\r\n\r\n    for (let i = 0; i < N; i++) {\r\n        let f = (i / N - 0.5) * R\r\n        raypos.push([0, f * 1, -1])\r\n        raydir.push([0, 0, 1])\r\n\r\n        raypos.push([0, f * 1 + 10, -1])\r\n        raydir.push([0, -0.5, 1])\r\n    }\r\n\r\n    raypos = tf.tensor(raypos).transpose()\r\n    raydir = tf.tensor(raydir).transpose()\r\n\r\n    let result = []\r\n    result.push(raypos.arraySync())\r\n    let surface = system.surfaces[0]\r\n\r\n    let n1 = 1\r\n    let z = 0\r\n    for (let surface of system.surfaces) {\r\n        let n2 = surface.material.index\r\n\r\n\r\n        raypos = surface.trace(raypos.sub(tf.tensor([[0], [0], [z]])), raydir)\r\n        let normal = surface.normal(raypos)\r\n\r\n\r\n        raydir = raydir.div(raydir.mul(raydir).sum(0).sqrt()).mul(n1)\r\n        normal = normal.mul(raydir.mul(normal).sum(0).sign())\r\n        let tangent2 = tf.sub(1, raydir.mul(normal).sum(0))\r\n        let displace = tf.sub(n2 ** 2, tangent2).sqrt().sub(tf.sub(n1 ** 2, tangent2).sqrt())\r\n        raydir = raydir.add(normal.mul(displace))\r\n\r\n\r\n        raypos = raypos.add(tf.tensor([[0], [0], [z]]))\r\n        result.push(raypos.arraySync())\r\n        n1 = n2\r\n        z += surface.thickness\r\n    }\r\n    tf.engine().endScope()\r\n\r\n\r\n    // result.push(raypos.add(raydir).arraySync())\r\n    return result\r\n}\r\n\r\n\r\nexport default RayTrace","import { render } from \"./LensPlot.vue?vue&type=template&id=be8aafec&scoped=true\"\nimport script from \"./LensPlot.vue?vue&type=script&lang=js\"\nexport * from \"./LensPlot.vue?vue&type=script&lang=js\"\n\nimport \"./LensPlot.vue?vue&type=style&index=0&id=be8aafec&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\Documents\\\\Github\\\\OpticTool\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-be8aafec\"]])\n\nexport default __exports__","import OpticSystem from \"./OpticSystem\"\r\nimport RayTrace from \"./RayTrace\"\r\n\r\nconst system = new OpticSystem()\r\n\r\n\r\nexport default {\r\n    system\r\n}","import { render } from \"./App.vue?vue&type=template&id=259ee674\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\Documents\\\\Github\\\\OpticTool\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport './style/index.scss'\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkoptictool\"] = self[\"webpackChunkoptictool\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(7759); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_LensPlot","system","$data","_component_LensSheet","_Fragment","$props","surfaces","surface","i","key","_createBlock","_resolveDynamicComponent","component","_hoisted_2","onClick","$options","splice","length","_hoisted_5","OpticMaterial","constructor","index","this","OpticSurface","thickness","curvature","material","trace","raypos","raydir","c","l","gather","div","mul","add","A","sum","B","sub","C","sqrt","normal","tf","n","shape","r","r2","Math","OpticSystem","for","id","type","step","_hoisted_3","_hoisted_4","min","max","props","data","__exports__","components","OpticSurfaceComponent","methods","addSurface","ref","RayTrace","startScope","N","R","f","push","transpose","result","arraySync","n1","z","n2","sign","tangent2","displace","endScope","canvas","ctx","resize","rect","$refs","container","getBoundingClientRect","width","height","update","resetTransform","clearRect","translate","ttl","scale","lineWidth","strokeStyle","beginPath","j","y","moveTo","lineTo","stroke","z0","watch","handler","deep","mounted","getContext","addEventListener","unmounted","removeEventListener","name","optic","LensSheet","LensPlot","render","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","call","m","amdD","Error","amdO","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","Object","keys","every","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","window","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","value","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}